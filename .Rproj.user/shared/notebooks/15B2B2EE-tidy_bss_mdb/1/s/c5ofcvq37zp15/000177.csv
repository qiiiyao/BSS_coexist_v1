"0","rm(list = ls())
setwd(""D:/R projects/BSS"")
"
"2","警告: The working directory was changed to D:/R projects/BSS inside a notebook chunk. The working directory will be reset when the chunk is finished running. Use the knitr root.dir option in the setup chunk to change the working directory for notebook chunks."
"0","require(dplyr)"
"0","require(data.table)"
"0","require(tidyr)"
"0","require(stringr)"
"0","require(readr)"
"0","require(ape)"
"0","require(phytools)"
"0","require(U.Taxonstand)"
"2","载入需要的程序包：U.Taxonstand
"
"0","### load the required data"
"0","load(""data/Plants_TPL.rdata"")"
"0","tree = read.tree('data/original data/phylo_tree332.txt')"
"0",""
"0","### don't use read_r function in readr, might enconutering some problems."
"0","community = read.csv(""data/BSS_data_2023/community_data_wide.csv"","
"0","                     header = T)"
"0","community_long = read.csv(""data/BSS_data_2023/community_data_long.csv"","
"0","                     header = T)"
"0","traits = read.csv(""data/BSS_data_2023/traits.csv"","
"0","                     header = T)"
"0",""
"0","community_long$DATAID = paste(community_long$FIELDID, community_long$PLOTID,"
"0","                              community_long$AGE, community_long$YEAR,"
"0","                              sep = '_')"
"0",""
"0","community_2 = community_long[,c(""DATAID"", 'FIELDID', 'PLOTID', 'YEAR', 'AGE',"
"0","                                ""species"",""COVER"")] %>%"
"0","              tidyr::pivot_wider(names_from = species,"
"0","              values_from = COVER,"
"0","              values_fn = sum) # using sum fn to merge the cover from various stems at same species"
"0",""
"0","traits$species = paste(traits$GENUS, traits$EPITHET, sep = '_')"
"0","traits_1 = traits %>% relocate(species, .after = EPITHET)"
"0",""
"0","## standardized the species name of trait data"
"0","standardized_names_traits = nameMatch(spList=gsub('_', ' ',traits$species),"
"0","                               spSource=database, author = TRUE, max.distance= 1)"
"1","[1]"
"1"," ""Loading and processing the database..."""
"1","
"
"1","[1]"
"1"," ""14 names (3.89%) that need to do fuzzy matching"""
"1","
"
"2","载入需要的命名空间：pbapply
"
"1","  |                                                        "
"1","  |                                                  |   0%"
"1","  |                                                        "
"1","  |++++                                              |   7%"
"1","  |                                                        "
"1","  |+++++++                                           |  14%"
"1","  |                                                        "
"1","  |+++++++++++                                       |  21%"
"1","  |                                                        "
"1","  |++++++++++++++                                    |  29%"
"1","  |                                                        "
"1","  |++++++++++++++++++                                |  36%"
"1","  |                                                        "
"1","  |+++++++++++++++++++++                             |  43%"
"1","  |                                                        "
"1","  |+++++++++++++++++++++++++                         |  50%"
"1","  |                                                        "
"1","  |+++++++++++++++++++++++++++++                     |  57%"
"1","  |                                                        "
"1","  |++++++++++++++++++++++++++++++++                  |  64%"
"1","  |                                                        "
"1","  |++++++++++++++++++++++++++++++++++++              |  71%"
"1","  |                                                        "
"1","  |+++++++++++++++++++++++++++++++++++++++           |  79%"
"1","  |                                                        "
"1","  |+++++++++++++++++++++++++++++++++++++++++++       |  86%"
"1","  |                                                        "
"1","  |++++++++++++++++++++++++++++++++++++++++++++++    |  93%"
"1","  |                                                        "
"1","  |++++++++++++++++++++++++++++++++++++++++++++++++++| 100%"
"1","
"
"2","警告: Unknown or uninitialised column: `Genus`."
"2","警告: Unknown or uninitialised column: `Genus`."
"2","警告: Unknown or uninitialised column: `Genus`."
"2","警告: Unknown or uninitialised column: `Genus`."
"2","警告: Unknown or uninitialised column: `Genus`."
"1","[1]"
"1"," ""NOTE: Only the first 'BEST' matching result(s) included (Name_set equals to one)."""
"1","
"
